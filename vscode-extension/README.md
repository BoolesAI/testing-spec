# vscode-tspec

Visual Studio Code extension providing language support for TSpec test specification files.

[![Version](https://img.shields.io/badge/version-0.0.1-blue.svg)](https://marketplace.visualstudio.com/items?itemName=boolesai.vscode-tspec)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

## Features

- **Syntax Highlighting**: Rich syntax highlighting for `.tspec` files
- **Code Snippets**: Pre-built templates for common test patterns
- **Validation**: Real-time validation with error diagnostics
- **Auto-completion**: IntelliSense support for TSpec fields and values
- **Language Configuration**: Smart bracket matching, auto-indentation, and comment toggling

## Installation

### From VS Code Marketplace

1. Open Visual Studio Code
2. Press `Ctrl+P` / `Cmd+P`
3. Type `ext install boolesai.vscode-tspec`
4. Press Enter

### From VSIX File

```bash
code --install-extension vscode-tspec-0.0.1.vsix
```

## Usage

### File Recognition

The extension automatically activates for files with `.tspec` extension:
- `.http.tspec` - HTTP protocol tests
- `.grpc.tspec` - gRPC protocol tests
- `.graphql.tspec` - GraphQL protocol tests
- `.ws.tspec` - WebSocket protocol tests

### Code Snippets

Type the following prefixes and press `Tab` to expand:

| Prefix | Description |
|--------|-------------|
| `tspec-http` | Basic HTTP test case template |
| `tspec-post` | HTTP POST request template |
| `tspec-get` | HTTP GET request template |
| `tspec-assertion` | Assertion block |
| `tspec-data` | Data-driven test template |

### Configuration

The extension can be configured through VS Code settings:

```json
{
  "tspec.validation.enabled": true,
  "tspec.validation.strictMode": false
}
```

**Settings:**
- `tspec.validation.enabled` - Enable/disable TSpec validation (default: `true`)
- `tspec.validation.strictMode` - Enable strict validation mode (default: `false`)

## Build from Source

Prerequisites:
- Node.js >= 18.0.0
- npm >= 9.0.0
- Visual Studio Code >= 1.75.0

```bash
# Clone the repository
git clone https://github.com/boolesai/testing-spec.git
cd testing-spec/vscode-extension

# Install dependencies
npm install

# Compile TypeScript
npm run compile

# Watch mode for development
npm run watch

# Type checking
npm run typecheck

# Package the extension
npm run package
```

### Build Output

- `out/` - Compiled JavaScript
- `*.vsix` - Packaged extension file (generated by `npm run package`)

### Install Built Extension

```bash
# Package the extension
npm run package

# This generates vscode-tspec-0.0.1.vsix
# Install it in VS Code:
code --install-extension vscode-tspec-0.0.1.vsix
```

### Development Mode

For local development and testing:

1. Open the `vscode-extension` folder in VS Code
2. Press `F5` to launch Extension Development Host
3. The extension will be loaded in a new VS Code window
4. Open any `.tspec` file to test features

## Extension Structure

```
vscode-extension/
├── src/
│   ├── extension.ts          # Extension entry point
│   ├── providers/
│   │   ├── completionProvider.ts   # Auto-completion logic
│   │   └── diagnosticProvider.ts   # Validation and diagnostics
│   └── utils/
│       ├── schemaData.ts     # TSpec schema definitions
│       └── yamlHelper.ts     # YAML parsing utilities
├── syntaxes/
│   └── tspec.tmLanguage.json # Syntax highlighting grammar
├── snippets/
│   └── tspec.json            # Code snippet definitions
├── language-configuration.json # Language features config
└── package.json              # Extension manifest
```

## Documentation

For complete TSpec DSL documentation, see the [docs](../doc) directory.

## Related

- [@boolesai/tspec](https://www.npmjs.com/package/@boolesai/tspec) - Core library for TSpec
- [@boolesai/tspec-cli](https://www.npmjs.com/package/@boolesai/tspec-cli) - Command-line interface for TSpec

## License

MIT
